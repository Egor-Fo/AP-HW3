# üîó URL Shortener API

–ü—Ä–æ—Å—Ç–æ–π —Å–µ—Ä–≤–∏—Å —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫ –Ω–∞ FastAPI —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ—Ä–æ—Ç–∫–æ–π —Å—Å—ã–ª–∫–∏
- üßæ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ —Å—Å—ã–ª–∫–µ
- üßº –£–¥–∞–ª–µ–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (—Ç–æ–ª—å–∫–æ –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–∞)
- üîê –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (JWT)
- üß† –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –≤ Redis
- üß≠ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –∂–∏–∑–Ω–∏ —Å—Å—ã–ª–æ–∫

---

## üß† –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- `FastAPI` + `SQLAlchemy`
- `PostgreSQL`
- `Redis`
- `Docker`, `docker-compose`
- `passlib`, `python-jose`, `shortuuid`, `qrcode`

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä—É–π –ø—Ä–æ–µ–∫—Ç

```bash
git clone https://github.com/yourusername/AP-HW3.git
cd AP-HW3
```

### 2. –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose

```bash
docker-compose up --build
```

---

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è OAuth2 —Å JWT —Ç–æ–∫–µ–Ω–∞–º–∏
- –î–ª—è –∑–∞—â–∏—â—ë–Ω–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–∫–µ–Ω `Authorization: Bearer <token>`


## üì® –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### üî∏ POST /register

```json
{
  "username": "testuser",
  "password": "strongpassword"
}
```

### üî∏ POST /login

```json
{
  "username": "testuser",
  "password": "strongpassword"
}
```

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JWT —Ç–æ–∫–µ–Ω.

---

### üî∏ POST /links/shorten

```json
{
  "original_url": "https://example.com",
  "custom_alias": "promo2025",
  "expires_at": "2025-04-01T12:00:00"
}
```

‚úÖ –ú–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å **–±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**

---

### üî∏ GET /{short_code}

–ü–µ—Ä–µ—Ö–æ–¥ –ø–æ –∫–æ—Ä–æ—Ç–∫–æ–π —Å—Å—ã–ª–∫–µ.

---

### üî∏ GET /links/{short_code}/stats

üîê –¢—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –ø—Ä–∞–≤ –≤–ª–∞–¥–µ–ª—å—Ü–∞.

---

### üî∏ PUT /links/{short_code}

```json
{
  "new_original_url": "https://newsite.com"
}
```

üîê –¢—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –ø—Ä–∞–≤ –≤–ª–∞–¥–µ–ª—å—Ü–∞.

---

### üî∏ DELETE /links/{short_code}

–£–¥–∞–ª–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –≤–ª–∞–¥–µ–ª—å—Ü–µ–º.

---

### üî∏ GET /links/{short_code}/qrcode

–ì–µ–Ω–µ—Ä–∞—Ü–∏—è QR-–∫–æ–¥–∞ –¥–ª—è –∫–æ—Ä–æ—Ç–∫–æ–π —Å—Å—ã–ª–∫–∏.

---

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î

- `users`: id, username, hashed_password
- `links`: short_code, original_url, created_at, expires_at, clicks, last_accessed_at, owner_id (FK)